# 🔐 SSL证书申请和部署指南 - 小学生版

## 📋 什么是SSL证书？

SSL证书就像网站的"身份证"，让网站更安全：
- 🔒 保护用户隐私
- ✅ 让浏览器显示绿色锁头
- 🚀 让微信小程序能正常访问

## 🎯 两种申请方法

### 方法一：腾讯云免费证书（推荐）

#### 第一步：登录腾讯云
1. 打开浏览器，访问：https://console.cloud.tencent.com/
2. 用QQ号或微信登录

#### 第二步：找到SSL证书
1. 在搜索框输入"SSL证书"
2. 点击"SSL证书"服务

#### 第三步：申请证书
1. 点击"申请免费证书"
2. 选择"域名型免费版（DV）"
3. 填写域名：`aiyunsf.com`
4. 选择"自动DNS验证"
5. 点击"提交申请"

#### 第四步：等待审核
- 通常几分钟就能通过
- 状态变成"已颁发"就可以下载

#### 第五步：下载证书
1. 点击"下载"按钮
2. 选择"Nginx"格式
3. 下载两个文件：
   - `aiyunsf.com.crt` (证书文件)
   - `aiyunsf.com.key` (私钥文件)

#### 第六步：上传到服务器
1. 下载FileZilla：https://filezilla-project.org/
2. 连接信息：
   - 主机：175.178.33.180
   - 用户名：root
   - 密码：你的服务器密码
   - 端口：22
3. 把证书文件上传到服务器的 `/root/` 目录

#### 第七步：运行部署脚本
```bash
# 登录服务器
ssh root@175.178.33.180

# 进入项目目录
cd /root/processing-app/server

# 给脚本执行权限
chmod +x deploy-ssl.sh

# 运行部署脚本
./deploy-ssl.sh
```

### 方法二：自动申请Let's Encrypt证书（更简单）

#### 第一步：登录服务器
```bash
ssh root@175.178.33.180
```

#### 第二步：进入项目目录
```bash
cd /root/processing-app/server
```

#### 第三步：运行自动申请脚本
```bash
# 给脚本执行权限
chmod +x auto-ssl.sh

# 运行自动申请脚本
./auto-ssl.sh
```

这个脚本会自动：
- 📦 安装必要的工具
- 🔐 申请免费证书
- ⚙️ 配置Nginx
- 🔄 设置自动续期

## 🔧 验证部署结果

### 检查证书状态
```bash
# 查看证书有效期
openssl x509 -in /etc/nginx/ssl/aiyunsf.com.crt -noout -dates

# 或者查看Let's Encrypt证书
certbot certificates
```

### 测试网站访问
1. 打开浏览器，访问：https://aiyunsf.com
2. 应该看到绿色锁头
3. 微信小程序应该能正常访问

### 检查小程序
1. 重新编译小程序
2. 测试登录功能
3. 应该不再出现SSL证书错误

## 🚨 常见问题解决

### 问题1：证书申请失败
**原因：** 域名DNS解析不正确
**解决：** 检查域名是否指向正确的服务器IP

### 问题2：上传文件失败
**原因：** 网络连接问题
**解决：** 使用其他FTP工具或重新上传

### 问题3：脚本执行失败
**原因：** 权限不足
**解决：** 确保使用root用户运行脚本

### 问题4：Nginx配置错误
**原因：** 配置文件有问题
**解决：** 检查Nginx配置文件语法

## 📞 需要帮助？

如果遇到问题，请提供：
1. 错误信息截图
2. 服务器日志
3. 具体操作步骤

## 🎉 完成！

部署成功后，你的网站就支持HTTPS了：
- ✅ 微信小程序可以正常访问
- ✅ 用户数据更安全
- ✅ 网站更专业

---

**记住：** SSL证书需要定期更新，建议设置自动续期！



